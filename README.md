1. Создание веб-приложения:
    - Разработайте простое веб-приложение на языке по вашему выбору (например, Python/Flask, Node.js, Ruby on Rails).
    Я выбрал flask. Из него запускается сайт, который из себя представляет сайт-портфолио(пустое).
    - Убедитесь, что приложение выполняет какое-либо действие, пусть самое простое (например, при введении в инпут имени возвращает "Hello, Имя!").
    В качестве действия представлены анимации текстов и zoom картинки слева. Питоновский файл - app.py. сайт - index.html, styles.css, script.js
    
2. Создание Docker-контейнера:
    - Напишите Dockerfile для вашего веб-приложения.
    - Убедитесь, что Dockerfile правильно копирует исходный код, устанавливает зависимости и запускает приложение.
    - Dockerfile должен быть оптимизирован для минимального размера образа.
Dockerfile создает образ на основе официального образа Python, затем устанавливает Flask,
выбирает рабочую директорию /root, копирует файлы из локальной директории part1 в рабочую директорию контейнера,
открывает порт 5000 для доступа к приложению и, наконец, запускает Flask-приложение, используя python app.py.

3. Настройка Ansible:
    - Создайте Ansible playbook для развертывания Docker-контейнера с вашим приложением на удаленном сервере.
    - Убедитесь, что playbook устанавливает Docker на сервере, если он еще не установлен, и запускает контейнер с вашим приложением.
    - Ansible playbook должен быть идемпотентным (https://docs.ansible.com/ansible/latest/playbook_guide/playbooks_intro.html#desired-state-and-idempotency).
playbook.yml разворачивает Flask-приложение на хостах EC2. Устанавливаются системные пакеты и добавляет ключ GPG для Docker, а затем добавляется репозиторий Docker и устанавливается
Docker и Docker Compose. Далее создается директория для приложения, копируется файл docker-compose.yml
в эту директорию, и останавливаются любые запущенные Docker-сервисы для данного проекта.
playbook обновляет Docker-образы и запускает Docker-сервисы,
используя Docker Compose, чтобы гарантировать, что приложение работает с последними версиями образов.

4. Настройка GitHub Actions:
    - Создайте репозиторий на GitHub и загрузите туда ваше приложение, Dockerfile и Ansible playbook.
    - Настройте GitHub Actions workflow, который будет автоматически запускаться при каждом пуше в репозиторий.
    - Workflow должен включать следующие шаги:
        - Сборка Docker-образа.
        - Загрузка образа в Docker Hub (или другой регистр контейнеров).
        - Выполнение Ansible playbook для развертывания нового образа на удаленном сервере.
воркфлоу запускается при каждом пуше в репозиторий.
Сначала выполняется шаг Checkout, который клонирует код из репозитория.
Затем устанавливаются QEMU и Docker Buildx для построения образов Docker.
Потом делаем авторизацию на Docker Hub с использованием секретов,
и создаём и загружаем образы Docker.
В конце выполняется развертывание приложения с использованием Ansible,
который подключается к удаленным хостам EC2 и применяет указанный playbook для установки и настройки приложения.

5. docker-compose.yml
 docker-compose.yml файл настраивает сервис под названием api,
который использует Docker-образ hamidovsiyovush/flask_app:latest
и запускается в контейнере с именем my_app.
Контейнер будет перезапускаться автоматически при сбоях, а порты 6969 : 5000

Как запустить?
  docker-compose ud
  http://public_ip:6969
